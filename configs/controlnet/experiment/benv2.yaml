# @package _global_
# ControlNet training configuration for BigEarthNet-v2 dataset

defaults:
  - /default

experiment:
  name: "controlnet_benv2_sar2opt"
  output_dir: "./checkpoints/controlnet/benv2"

data:
  dataset: "benv2"

model:
  dino:
    checkpoint: "./checkpoints/stage1_sar.pth"

  classifier:
    num_classes: 19

# Memory optimizations to match shell script
training:
  trainable_modules:
    - controlnet
    - image_attentions
    - conv_out_conf
  set_grads_to_none: true
  optimizer:
    use_8bit: true  # Enable 8-bit Adam (was incorrectly false in default.yaml)
